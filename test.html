<!DOCTYPE html>
<html>
<head>
    <title>WS Test</title>
</head>
<body>
    <h1>Native WebSocket Test</h1>
    <div id="messages"></div>
    <script>
        // *** è«‹å°‡é€™è£¡æ›æˆæ‚¨è‡ªå·±çš„ wss:// ç¶²å€ ***
        const WSS_URL = "wss://line-ordering-backend-199532894970.asia-east1.run.app";
        
        const messagesDiv = document.getElementById('messages');
        
        console.log("Attempting to connect to:", WSS_URL);
        messagesDiv.innerHTML += `<p>æ­£åœ¨é€£ç·šè‡³ ${WSS_URL}...</p>`;

        const ws = new WebSocket(WSS_URL);

        ws.onopen = function() {
            console.log("WebSocket connection established!");
            messagesDiv.innerHTML += '<p style="color: green;">âœ… é€£ç·šæˆåŠŸï¼</p>';
        };

        ws.onmessage = function(event) {
            console.log("Message from server:", event.data);
            const data = JSON.parse(event.data);
            messagesDiv.innerHTML += `<p style="color: blue;">ğŸ”¥ æ”¶åˆ°æ–°è¨Šæ¯:</p><pre>${JSON.stringify(data, null, 2)}</pre>`;
        };

        ws.onclose = function(event) {
            console.log("WebSocket connection closed:", event);
            messagesDiv.innerHTML += `<p style="color: red;">âŒ é€£ç·šé—œé–‰ (Code: ${event.code})</p>`;
        };

        ws.onerror = function(error) {
            console.error("WebSocket Error:", error);
            messagesDiv.innerHTML += `<p style="color: red;">âŒ ç™¼ç”ŸéŒ¯èª¤ï¼</p>`;
        };
    </script>
</body>
</html>